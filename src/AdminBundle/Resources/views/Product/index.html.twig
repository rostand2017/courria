{% extends "AdminBundle::layout.html.twig" %}
{% block title %} Vêtements {% endblock %}
{% block titleContent %} Vêtements {% endblock %}
{% block body %}
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-white">
                <div class="panel-heading">
                    <h5 class="panel-title">Vêtements</h5>
                    <div class="panel-control">
                        <a href="javascript:void(0);" data-toggle="tooltip" class="new" data-original-title="Nouveau vêtement">
                            <i class="icon-plus text-success fa-2x"></i>
                        </a>
                        <a href="javascript:void(0);" data-toggle="tooltip" class="panel-collapse" data-original-title="Reduire/Agrandir">
                            <i class="icon-arrow-down fa-2x"></i>
                        </a>
                        <a href="" data-toggle="tooltip" class="panel-reload" data-original-title="Rafraichir">
                            <i class="icon-reload fa-2x"></i>
                        </a>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row m-t-sm">
                        <form action="" method="get">
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    <input  type="text" class="form-control"
                                    data-toggle="tooltip" data-original-title="Chercher par date min" name="begin" id="debut" placeholder="Chercher par date min">
                                </div>
                                <div class="col-md-6 form-group">
                                    <input  type="text" class="form-control"
                                    data-toggle="tooltip" data-original-title="Chercher par date max" name="end" id="end" placeholder="Chercher par date max">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-offset-10 col-md-2">
                                    <button class="btn btn-block btn-warning" type="submit">Chercher</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="row m-t-sm">
                        <div class="col-md-12">
                            <div class="table-responsive project-stats">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Image</th>
                                            <th>Nom</th>
                                            <th>Prix</th>
                                            <th>Description</th>
                                            <th>#</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for product in products %}
                                            <tr>
                                                <td><img style="width: 40px" src="/uploads/thumbnails/{{ product.images[0].thumbnail }}" alt="{{ product.name }}" title="{{ product.name }}"></td>
                                                <td>{{ product.name }}</td>
                                                <td>{{ product.price }}</td>
                                                <td>{{ product.description }}</td>
                                                <td>
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                                            Actions <span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu" role="menu">
                                                            <li>
                                                                <a href="javascript:void(0);" data-id="{{ product.id }}" data-price="{{ product.price }}"
                                                                   data-name="{{ product.name }}" data-description="{{ product.description }}"
                                                                   data-category = "{{ product.category }}" data-reduction = "{{ product.reduction }}"
                                                                   data-color = "{{ product.color }}"
                                                                   data-number1 = {% for infoProduct in product.number %} {% if infoProduct.size == "L" %} "{{ infoProduct.number }}" {% endif %} {% endfor %}
                                                                   data-number2 = {% for infoProduct in product.number %} {% if infoProduct.size == "XL" %} "{{ infoProduct.number }}" {% endif %} {% endfor %}
                                                                   data-number3 = {% for infoProduct in product.number %} {% if infoProduct.size == "XXL" %} "{{ infoProduct.number }}" {% endif %} {% endfor %}
                                                                   class="edit">Modifier</a>
                                                            </li>
                                                            <li>
                                                                <a href="javascript:void(0);"  data-url="{{ path("admin_delete_product", {"id" : product.id}) }}" class="delete">Supprimer</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </td>
                                            </tr>
                                        {% else %}
                                            <tr class="text-center text-info">
                                                <td colspan="5">Aucun vêtement enregistré</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>

                                    <tfoot>
                                        <tr>
                                            {% if nbPage > 1 %}
                                                <td colspan="5">
                                                    <ul class="pagination pull-right">
                                                        <li class="{% if page <= 1 %}disabled{% endif %}"><a href="
                                                            {% if page > 1 %}
                                                                 {{ path("admin_homepage") }}?page={{ page-1 }}&begin={{ app.request.query.get("begin") }}&end={{ app.request.query.get("end") }}
                                                            {% else %}#{% endif %}">précédent</a>
                                                        </li>
                                                        {% for nb in range(1, nbPage) %}
                                                            <li class="{% if page == nb %}active{% endif %}">
                                                                <a href="{% if page != nb %}
                                                                            {{ path("admin_homepage") }}?page={{ nb }}&begin={{ app.request.query.get("begin") }}&end={{ app.request.query.get("end")}}
                                                                        {% endif %}
                                                                ">
                                                                    {{ nb }}
                                                                </a>
                                                            </li>
                                                        {% endfor %}
                                                        <li class="{% if page >= nbPage %}disabled{% endif %}"><a href="
                                                            {% if page < nbPage  %}
                                                                 {{ path("admin_homepage") }}?page={{ page+1 }}&begin={{ app.request.query.get("begin") }}&end={{ app.request.query.get("end") }}
                                                            {% else %}#{% endif %}">suivant</a>
                                                        </li>
                                                    </ul>
                                                </td>
                                            {% endif %}
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade newModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                    <h2 class="modal-title titleForm">NOUVEAU VETEMENT</h2>
                </div>
                <form enctype="multipart/form-data" action="{{ path("admin_edit_product") }}" id="newForm" method="post">
                    <div class="modal-body">
                        <input  id="action" value="add" type="hidden">
                        <input  id="idElement" name="id" value="" type="hidden">
                        <div class="row">
                            <div class="col-md-6 form-group">
                                <label for="name">Nom</label>
                                <input  class="form-control" id="name" name="name" placeholder="Nom du vêtement" type="text">
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="price">Prix</label>
                                <input  type="number" class="form-control" name="price" id="price">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 form-group">
                                <label for="color">Couleur</label>
                                <select name="color" id="color" class="form-control">
                                    <option value="noir">noir</option>
                                    <option value="blanc">Blanc</option>
                                    <option value="bleu">Bleu</option>
                                    <option value="rouge">Rouge</option>
                                    <option value="vert">Vert</option>
                                    <option value="marron">Marron</option>
                                </select>
                            </div>
                            <div class="col-md-6 form-group">
                                <label for="reduction">Réduction</label>
                                <input  type="number" min="0" max="100" value="0" class="form-control" name="reduction" id="reduction">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 form-group">
                                <label for="description">Description</label>
                                <textarea  class="form-control" id="description" name="description" placeholder="Description" type="text"></textarea>
                            </div>
                        </div>

                        <h3>Définissez le nombre de vêtement en fonction de la taille</h3>
                        <div class="row">
                            <div class="col-md-4 form-group">
                                <label for="number1">L</label>
                                <input  class="form-control" id="number1" value="0" min="0" name="number1" placeholder="Nombre" type="number" required>
                            </div>
                            <div class="col-md-4 form-group">
                                <label for="number2">XL</label>
                                <input  class="form-control" id="number2" value="0" min="0" name="number2" placeholder="Nombre" type="number" required>
                            </div>
                            <div class="col-md-4 form-group">
                                <label for="number3">XXL</label>
                                <input  class="form-control" id="number3" value="0" min="0" name="number3" placeholder="Nombre" type="number" required>
                            </div>
                        </div>

                        <h3>Définissez une catégorie pour ce vêtement</h3>

                        <div class="row">
                            <div class="col-md-12 form-group">
                                {% if categories is defined %}
                                    <select name="category" id="category" class="form-control">
                                        {% for category in categories %}
                                            <option value="{{ category.category }}">{{ category.category }}</option>
                                        {% endfor %}
                                    </select>
                                {% else %}
                                    <p class="text-center badge badge-warning"><i class="fa fa-warning"> </i> Aucune catégorie enregistrée</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 form-group">
                                <label for="image1">Image 1</label>
                                <input  type="file" class="form-control" name="image1" id="image1">
                            </div>
                            <div class="col-md-4 form-group">
                                <label for="image2">Image 2</label>
                                <input  type="file" class="form-control" name="image2" id="image2">
                            </div>
                            <div class="col-md-4 form-group">
                                <label for="image3">Image 3</label>
                                <input  type="file" class="form-control" name="image3" id="image3">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="newBtn btn btn-success">AJOUTER</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Annuler</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script src="{{ asset("bundles/admin/assets/js/product.js") }}"></script>
{% endblock %}